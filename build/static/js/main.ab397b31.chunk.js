(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{35:function(e,t,a){e.exports=a(64)},40:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(16),c=a.n(l),s=(a(40),a(10)),u=a(14),o=Object(n.createContext)(),i=Object(n.createContext)(),m=function(e){var t=e.title,a=e.icon,l=Object(n.useContext)(o),c=l.user,u=l.logout,m=l.isAuthencated,E=l.clearErrors,d=Object(n.useContext)(i).clearGuests,p=r.a.createElement(n.Fragment,null,r.a.createElement("li",null,"Hello, ",c&&c.name),r.a.createElement("span",{className:"sm-hide"},"|"),r.a.createElement("li",null,r.a.createElement("a",{href:"#!",onClick:function(){u(),d(),E()}},r.a.createElement("span",{className:"sm-hide"},"Logout")," ",r.a.createElement("i",{className:"fas fa-sign-out-alt"})))),g=r.a.createElement(n.Fragment,null,r.a.createElement("li",null,r.a.createElement(s.b,{to:"/register"},"Register")),r.a.createElement("span",{className:"sm-hide"},"|"),r.a.createElement("li",null,r.a.createElement(s.b,{to:"/login"},"Login")));return r.a.createElement("div",{className:"navbar"},r.a.createElement("div",{className:"logo"},r.a.createElement("h1",null,r.a.createElement("i",{className:a})," ",t," "),r.a.createElement("p",null,"Made with ",r.a.createElement("span",null,"\u2764")," by Mu Idrees")),r.a.createElement("ul",null,m?p:g))};m.defaultProps={title:"Party RSVP",icon:"fas fa-glass-cheers"};var E=m,d=a(13),p=a(1),g=a(11),h=function(){var e=Object(n.useContext)(i),t=e.addGuest,a=e.editGuest,l=e.clearEdit,c=e.update_Guest;Object(n.useEffect)((function(){m(null!==a?a:{name:"",phone:"",diet:"Non-Veg"})}),[a,e]);var s=Object(n.useState)({name:"",phone:"",diet:"Non-Veg"}),u=Object(g.a)(s,2),o=u[0],m=u[1],E=o.name,h=o.phone,f=o.diet,v=function(e){m(Object(p.a)({},o,Object(d.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"invite-section"},r.a.createElement("h1",null,null!==a?"Edit Guest":"Invite Someone"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),null===a?t(o):(c(o),l()),m({name:"",phone:"",diet:"Non-Veg"})}},r.a.createElement("input",{type:"text",placeholder:"Name",name:"name",value:E,onChange:v,required:!0}),r.a.createElement("input",{type:"text",placeholder:"Phone",name:"phone",value:h,onChange:v,required:!0}),r.a.createElement("p",{className:"options-label"},"Dietary"),r.a.createElement("div",{className:"options"},r.a.createElement("label",{class:"container"},"Non-Veg",r.a.createElement("input",{type:"radio",name:"diet",value:"Non-Veg",onChange:v,checked:"Non-Veg"===f}),r.a.createElement("span",{class:"checkmark"})),r.a.createElement("label",{class:"container"},"Vegan",r.a.createElement("input",{type:"radio",name:"diet",value:"Vegan",onChange:v,checked:"Vegan"===f}),r.a.createElement("span",{class:"checkmark"})),r.a.createElement("label",{class:"container"},"Pescatarian",r.a.createElement("input",{type:"radio",name:"diet",value:"Pescatarian",onChange:v,checked:"Pescatarian"===f}),r.a.createElement("span",{class:"checkmark"}))),r.a.createElement("input",{type:"submit",value:null!==a?"Update Guest":"Add Guest",className:"btn"}),null!==a?r.a.createElement("input",{onClick:l,type:"button",className:"btn clear",value:"Cancel"}):null))},f=function(){var e=Object(n.useContext)(i).toggleGuestFilter;return r.a.createElement("div",{className:"toggle"},r.a.createElement("label",{class:"switch"},r.a.createElement("input",{type:"checkbox",onChange:function(){return e()}}),r.a.createElement("span",{class:"slider round"})),r.a.createElement("p",{className:"lead"},"Show attending only!"))},v=function(){var e=Object(n.useContext)(i),t=e.search_Guest,a=e.clearSearchGuest,l=Object(n.useRef)("");return r.a.createElement("div",null,r.a.createElement("input",{ref:l,onChange:function(e){""!==l.current.value?t(e.target.value):a()},type:"text",placeholder:"Search Guest by name...",className:"search"}),r.a.createElement("i",{className:"fas fa-search search-icon"}))},b=function(){var e=Object(n.useContext)(i).guests,t=e.filter((function(e){return e.isconfirmed})),a=function(a){return{total:e.filter((function(e){return e.diet===a})).length,confirmed:t.filter((function(e){return e.diet===a})).length}};return r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Guest"),r.a.createElement("th",null,"Invited"),r.a.createElement("th",null,"Attending")),r.a.createElement("tr",null,r.a.createElement("th",null,"Non-veg"),r.a.createElement("td",null,a("Non-Veg").total),r.a.createElement("td",null,a("Non-Veg").confirmed)),r.a.createElement("tr",null,r.a.createElement("th",null,"Vegan"),r.a.createElement("td",null,a("Vegan").total),r.a.createElement("td",null,a("Vegan").confirmed)),r.a.createElement("tr",null,r.a.createElement("th",null,"Pescetarians"),r.a.createElement("td",null,a("Pescatarian").total),r.a.createElement("td",null,a("Pescatarian").confirmed)),r.a.createElement("tr",null,r.a.createElement("th",null,"Total"),r.a.createElement("td",null,e.length),r.a.createElement("td",null,t.length)))))},y=a(67),G=a(66),O=function(e){var t=e.guest,a=Object(n.useContext)(i),l=a.removeGuest,c=a.edit_Guest,s=a.clearEdit,u=a.update_Guest,o=t._id,m=t.name,E=t.phone,d=t.diet,g=t.isconfirmed;return r.a.createElement("div",{class:"guest-card"},r.a.createElement("div",{class:"card-head"},r.a.createElement("div",null,r.a.createElement("label",{className:"".concat(g&&"confirm")},"Confirmed",r.a.createElement("i",{className:"fas fa-check-square ".concat(g&&"confirm")},r.a.createElement("input",{type:"checkbox",onChange:function(){u(Object(p.a)({},t,{isconfirmed:!g}))}})," "))),r.a.createElement("div",null,r.a.createElement("button",{title:"Edit Guest"},r.a.createElement("i",{class:"fas fa-user-edit",onClick:function(){return c(t)}})),r.a.createElement("button",{onClick:function(){l(o),s()},title:"Remove Guest"},r.a.createElement("i",{class:"fas fa-trash-alt remove"})))),r.a.createElement("div",{class:"card-body"},r.a.createElement("h2",null,m),r.a.createElement("span",{class:"badge "+("Vegan"===d?"green":"Non-Veg"===d?"red":"seaGreen")},d),r.a.createElement("div",{class:"contact"},r.a.createElement("i",{class:"fas fa-phone-alt"}),r.a.createElement("p",null,E))))},S=function(){var e=Object(n.useContext)(i),t=Object(n.useContext)(o).loading,a=e.guests,l=e.guestFilter,c=e.searchGuest,s=e.getGuests;return Object(n.useEffect)((function(){s()}),[]),null===a||0===a.length?r.a.createElement("h3",{className:"no-guest"},t?"Loading guests...":"Please add a guest"):r.a.createElement("div",null,r.a.createElement(y.a,{className:"guests"},null!==c?c.map((function(e){return r.a.createElement(G.a,{key:e._id,timeout:300,classNames:"item"},r.a.createElement(O,{guest:e}))})):a.filter((function(e){return!l||e.isconfirmed})).map((function(e){return r.a.createElement(G.a,{key:e._id,timeout:300,classNames:"item"},r.a.createElement(O,{guest:e}))}))))},C=function(){var e=Object(n.useContext)(o).loadUser;return Object(n.useEffect)((function(){e()}),[]),r.a.createElement("div",{className:"app-container"},r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"filter"},r.a.createElement(f,null),r.a.createElement(v,null)),r.a.createElement(h,null),r.a.createElement(b,null)),r.a.createElement(S,null))},R=function(e){var t=Object(n.useContext)(o),a=t.register,l=t.isAuthencated,c=t.error,u=t.clearErrors,i=t.setError;Object(n.useEffect)((function(){l&&e.history.push("/")}),[l,e.history]);var m=Object(n.useState)({name:"",email:"",password:"",password2:""}),E=Object(g.a)(m,2),h=E[0],f=E[1],v=h.name,b=h.email,y=h.password,G=h.password2;return onchange=function(e){f(Object(p.a)({},h,Object(d.a)({},e.target.name,e.target.value))),null!==c&&u()},onsubmit=function(e){e.preventDefault(),y!==G?i("Password does not match"):a({name:v,email:b,password:y})},r.a.createElement("div",{className:"register"},r.a.createElement("h1",null,"Sign Up"),r.a.createElement("form",null,r.a.createElement("input",{type:"text",name:"name",placeholder:"Name",value:v,onChange:onchange}),r.a.createElement("input",{type:"email",name:"email",placeholder:"Email",value:b,onChange:onchange}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",value:y,onChange:onchange}),r.a.createElement("input",{type:"password",name:"password2",placeholder:"Confirm Password",value:G,onChange:onchange,required:!0}),r.a.createElement("input",{type:"submit",value:"Sing Up",className:"btn"})),r.a.createElement("div",{className:"question"},null!==c&&c.map((function(e){return r.a.createElement("button",{className:"danger",type:"button"},e.msg," ",r.a.createElement("span",{onClick:function(){return u()}},"X"))})),r.a.createElement("p",null,"Already have an accout? "," "," ",r.a.createElement(s.b,{to:"/login"},"Sign In "))))},j=function(e){var t=Object(n.useContext)(o),a=t.login,l=t.isAuthencated,c=t.error,u=t.clearErrors;Object(n.useEffect)((function(){l?(e.history.push("/"),u()):u()}),[l,e.history]);var i=Object(n.useState)({email:"",password:""}),m=Object(g.a)(i,2),E=m[0],h=m[1],f=E.email,v=E.password,b=function(e){h(Object(p.a)({},E,Object(d.a)({},e.target.name,e.target.value))),null!==c&&u()};return r.a.createElement("div",{className:"login"},r.a.createElement("h1",null,"Login"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a({email:f,password:v}),u()}},r.a.createElement("input",{type:"email",name:"email",placeholder:"Email",value:f,onChange:b}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",value:v,onChange:b,required:!0}),r.a.createElement("input",{type:"submit",value:"Login",className:"btn"})),r.a.createElement("div",{className:"question"},null!==c&&r.a.createElement("button",{className:"danger",type:"button"},c," ",r.a.createElement("span",{onClick:function(){return u()}},"X")),r.a.createElement("p",null,"Dont' have an accout? "," "," ",r.a.createElement(s.b,{to:"/register"},"Sign Up"))))},_=a(4),x=a.n(_),N=a(8),T=a.n(N),k=a(32),w=function(e,t){var a=t.type,n=t.payload;switch(a){case"GET_GUESTS":return Object(p.a)({},e,{guests:n,error:null});case"ADD_GUEST":return Object(p.a)({},e,{guests:[].concat(Object(k.a)(e.guests),[n])});case"REMOVE_GUEST":return Object(p.a)({},e,{guests:e.guests.filter((function(e){return e._id!==n}))});case"EDIT_GUEST":return Object(p.a)({},e,{editGuest:n});case"CLEAR_EDIT":return Object(p.a)({},e,{editGuest:null});case"UPDATE_GUEST":return Object(p.a)({},e,{guests:e.guests.map((function(e){return e._id===n._id?n:e}))});case"TOGGLE_GUESTFILTER":return Object(p.a)({},e,{guestFilter:!e.guestFilter});case"SEARCH_GUEST":var r=new RegExp("".concat(n),"gi");return Object(p.a)({},e,{searchGuest:e.guests.filter((function(e){return e.name.match(r)}))});case"CLEAR_SEARCH":return Object(p.a)({},e,{searchGuest:null});case"GUESTS_ERROR":return Object(p.a)({},e,{error:n});case"CLEAR_GUESTS":return Object(p.a)({},e,{guestFilter:!1,searchGuest:null,editGuest:null,guests:[],error:null});default:return e}},U=function(e){var t=Object(n.useReducer)(w,{guestFilter:!1,searchGuest:null,editGuest:null,guests:[],error:null}),a=Object(g.a)(t,2),l=a[0],c=a[1],s=function(){var e;return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.a.awrap(T.a.get("/guests"));case 3:e=t.sent,c({type:"GET_GUESTS",payload:e.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),c({type:"GUESTS_ERROR",payload:t.t0.response.msg});case 10:case"end":return t.stop()}}),null,null,[[0,7]])};return r.a.createElement(i.Provider,{value:{guests:l.guests,guestFilter:l.guestFilter,searchGuest:l.searchGuest,editGuest:l.editGuest,error:l.error,loading:l.loading,addGuest:function(e){var t,a;return x.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={"Content-Type":"application/json"},n.prev=1,n.next=4,x.a.awrap(T.a.post("/guests",e,t));case 4:a=n.sent,c({type:"ADD_GUEST",payload:a.data}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),c({type:"GUESTS_ERROR",payload:n.t0.response.msg});case 11:case"end":return n.stop()}}),null,null,[[1,8]])},removeGuest:function(e){return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.a.awrap(T.a.delete("/guests/".concat(e)));case 3:c({type:"REMOVE_GUEST",payload:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),c({type:"GUESTS_ERROR",payload:t.t0.response.msg});case 9:case"end":return t.stop()}}),null,null,[[0,6]])},edit_Guest:function(e){c({type:"EDIT_GUEST",payload:e})},clearEdit:function(){c({type:"CLEAR_EDIT"})},update_Guest:function(e){var t,a;return x.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{"Content-Type":"application/json"}},n.prev=1,n.next=4,x.a.awrap(T.a.put("/guests/".concat(e._id),e,t));case 4:a=n.sent,c({type:"UPDATE_GUEST",payload:a.data}),s(),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),c({type:"GUESTS_ERROR",payload:n.t0.response});case 12:case"end":return n.stop()}}),null,null,[[1,9]])},toggleGuestFilter:function(){c({type:"TOGGLE_GUESTFILTER"})},search_Guest:function(e){c({type:"SEARCH_GUEST",payload:e})},clearSearchGuest:function(){c({type:"CLEAR_SEARCH"})},getGuests:s,clearGuests:function(){c({type:"CLEAR_GUESTS"})}}},e.children)},A=function(e,t){var a=t.type,n=t.payload;switch(a){case"USER_LOADED":return Object(p.a)({},e,{isAuthencated:!0,user:n,loading:!1,error:null});case"REGISTER_SUCCESS":case"LOGIN_SUCCESS":return localStorage.setItem("token",n.token),Object(p.a)({},e,{},n,{isAuthencated:!0,loading:!1,error:null});case"REGISTER_FAIL":case"LOGIN_FAIL":case"AUTH_ERROR":case"LOGOUT":return localStorage.removeItem("token"),Object(p.a)({},e,{token:null,isAuthencated:null,user:null,loading:!1,error:n});case"CLEAR_ERRORS":return Object(p.a)({},e,{error:null});default:return e}},L=function(e){e?T.a.defaults.headers.common["x-auth-token"]=e:delete T.a.defaults.headers.common["x-auth-token"]},I=function(e){var t={token:localStorage.getItem("token"),isAuthencated:null,loading:!0,user:null,error:null},a=Object(n.useReducer)(A,t),l=Object(g.a)(a,2),c=l[0],s=l[1],u=function(){var e;return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return localStorage.token&&L(localStorage.token),t.prev=1,t.next=4,x.a.awrap(T.a.get("/auth"));case 4:e=t.sent,s({type:"USER_LOADED",payload:e.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),s({type:"AUTH_ERROR"});case 11:case"end":return t.stop()}}),null,null,[[1,8]])};return r.a.createElement(o.Provider,{value:{token:c.token,isAuthencated:c.isAuthencated,user:c.user,error:c.error,loading:c.loading,register:function(e){var t,a;return x.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={header:{"Content-Type":"application/json"}},n.prev=1,n.next=4,x.a.awrap(T.a.post("/register",e,t));case 4:a=n.sent,s({type:"REGISTER_SUCCESS",payload:a.data}),u(),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),s({type:"REGISTER_FAIL",payload:n.t0.response.data.error});case 12:case"end":return n.stop()}}),null,null,[[1,9]])},login:function(e){var t,a;return x.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={header:{"Content-Type":"application/json"}},n.prev=1,n.next=4,x.a.awrap(T.a.post("/auth",e,t));case 4:a=n.sent,s({type:"LOGIN_SUCCESS",payload:a.data}),u(),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),s({type:"LOGIN_FAIL",payload:n.t0.response.data.msg});case 12:case"end":return n.stop()}}),null,null,[[1,9]])},loadUser:u,logout:function(){return s({type:"LOGOUT"})},clearErrors:function(){return s({type:"CLEAR_ERRORS"})},setError:function(e){s({type:"REGISTER_FAIL",payload:[{msg:e}]})}}},e.children)},D=a(33),P=function(e){var t=e.component,a=Object(D.a)(e,["component"]),l=Object(n.useContext)(o),c=l.isAuthencated,s=l.loading;return r.a.createElement(u.b,Object.assign({},a,{render:function(e){return c||s?r.a.createElement(t,e):r.a.createElement(u.a,{to:"/login"})}}))};localStorage.token&&L(localStorage.token);var V=function(){return r.a.createElement(I,null,r.a.createElement(U,null,r.a.createElement(s.a,null,r.a.createElement("div",null,r.a.createElement(E,null),r.a.createElement(u.d,null,r.a.createElement(P,{exact:!0,path:"/",component:C}),r.a.createElement(u.b,{exact:!0,path:"/register",component:R}),r.a.createElement(u.b,{exact:!0,path:"/login",component:j}))))))};c.a.render(r.a.createElement(V,null),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.ab397b31.chunk.js.map